<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–ª–∞–Ω–µ—Ç–∞—Ä–∏–π ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ë–î</title>
    <style>
        :root {
            --bg-color: #f4f7f6;
            --card-bg: #ffffff;
            --primary-color: #2c3e50;
            --accent-color: #3498db;
            --success-color: #27ae60;
            --export-bg: #2d3436;
            --json-color: #e67e22;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--primary-color);
            margin: 0; padding: 20px;
            display: flex; flex-direction: column; align-items: center;
        }

        h1 { margin-bottom: 30px; }

        .alert {
            background-color: #d4edda; color: #155724; padding: 15px; 
            border-radius: 8px; margin-bottom: 20px; width: 100%; 
            max-width: 1100px; text-align: center; border: 1px solid #c3e6cb;
        }

        .forms-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px; width: 100%; max-width: 1200px;
        }

        .card {
            background: var(--card-bg); padding: 25px; 
            border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            position: relative;
        }

        .card h3 {
            margin-top: 0; border-bottom: 2px solid var(--accent-color);
            padding-bottom: 10px; color: var(--accent-color);
            display: flex; justify-content: space-between; align-items: center;
        }

        /* –ö–Ω–æ–ø–∫–∞ JSON */
        .btn-json {
            font-size: 0.6em; background: var(--json-color);
            color: white; text-decoration: none; padding: 4px 8px;
            border-radius: 4px; transition: 0.3s;
        }
        .btn-json:hover { background: #d35400; }

        label { display: block; margin-bottom: 5px; font-weight: bold; font-size: 0.9em; }
        input, select {
            width: 100%; padding: 10px; margin-bottom: 20px;
            border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box;
        }

        .btn-add { 
            background-color: var(--success-color); color: white; 
            width: 100%; padding: 12px; border: none; border-radius: 6px;
            cursor: pointer; font-weight: bold;
        }

        .xml-section {
            margin-top: 40px; width: 100%; max-width: 1200px;
            background-color: var(--export-bg); color: white;
            padding: 30px; border-radius: 12px;
            display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; gap: 20px;
        }

        .btn-export {
            background-color: #f1c40f; color: #000; text-decoration: none;
            padding: 12px 25px; border-radius: 6px; font-weight: bold;
        }

        .import-form {
            display: flex; align-items: center; gap: 10px;
            background: rgba(255,255,255,0.1); padding: 10px;
            border-radius: 8px; border: 1px dashed #777;
        }

        .import-form input[type="file"] { color: white; }
    </style>
</head>
<body>

    <h1>üî≠ –ü–ª–∞–Ω–µ—Ç–∞—Ä–∏–π: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–∑–≤–µ–∑–¥–∏—è–º–∏</h1>

    {% if success %}
        <div class="alert">‚úÖ –î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã!</div>
    {% endif %}

    <div class="forms-container">
        <div class="card">
            <h3>üåå –°–æ–∑–≤–µ–∑–¥–∏—è <a href="/constellations" class="btn-json" target="_blank">JSON API</a></h3>
            <form action="/add_constellation" method="post">
                <label>–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
                <input type="text" name="name" required>
                <button type="submit" class="btn-add">–î–æ–±–∞–≤–∏—Ç—å</button>
            </form>
        </div>

        <div class="card">
            <h3>‚≠ê –ó–≤–µ–∑–¥—ã <a href="/stars" class="btn-json" target="_blank">JSON API</a></h3>
            <form action="/add_star" method="post">
                <label>–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
                <input type="text" name="name" required>
                <label>–°–æ–∑–≤–µ–∑–¥–∏–µ:</label>
                <select name="const_id">
                    {% for c in constellations %}
                        <option value="{{ c.id }}">{{ c.name }}</option>
                    {% endfor %}
                </select>
                <button type="submit" class="btn-add">–î–æ–±–∞–≤–∏—Ç—å</button>
            </form>
        </div>

        <div class="card">
            <h3>ü™ê –ü–ª–∞–Ω–µ—Ç—ã <a href="/planets" class="btn-json" target="_blank">JSON API</a></h3>
            <form action="/add_planet" method="post">
                <label>–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
                <input type="text" name="name" required>
                <label>–ó–≤–µ–∑–¥–∞:</label>
                <select name="star_id">
                    {% for s in stars %}
                        <option value="{{ s.id }}">{{ s.name }}</option>
                    {% endfor %}
                </select>
                <button type="submit" class="btn-add">–î–æ–±–∞–≤–∏—Ç—å</button>
            </form>
        </div>
    </div>

    <div class="xml-section">
        <div>
            <h2 style="margin:0;">üì¶ –û–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏ XML</h2>
            <p style="margin: 5px 0 0 0; color: #bdc3c7;">(–ø–æ –º–µ—Ç–æ–¥–∏—á–∫–µ DOM-–º–æ–¥–µ–ª—å)</p>
        </div>
        <div style="display: flex; gap: 15px; align-items: center;">
            <a href="/export" class="btn-export">üì• –°–∫–∞—á–∞—Ç—å XML</a>
            <form action="/import" method="post" enctype="multipart/form-data" class="import-form">
                <input type="file" name="file" accept=".xml" required>
                <button type="submit" style="background:#95a5a6; color:white; width:auto; padding:10px;">üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
            </form>
        </div>
    </div>
    <script>
        // –ñ–¥–µ–º, –ø–æ–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è
        window.addEventListener('DOMContentLoaded', (event) => {
            // –ò—â–µ–º —ç–ª–µ–º–µ–Ω—Ç —Å –∫–ª–∞—Å—Å–æ–º alert
            const alert = document.querySelector('.alert');
            
            if (alert) {
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –Ω–∞ 3000 –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥ (3 —Å–µ–∫—É–Ω–¥—ã)
                setTimeout(() => {
                    // –ü–ª–∞–≤–Ω–æ–µ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å
                    alert.style.transition = "opacity 0.6s ease";
                    alert.style.opacity = "0";
                    
                    // –ü–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ 0.6 —Å–µ–∫ –ø–æ—Å–ª–µ –Ω–∞—á–∞–ª–∞ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è
                    setTimeout(() => {
                        alert.remove();
                    }, 600);
                }, 3000);
            }
        });
    </script>

</body>
</html>